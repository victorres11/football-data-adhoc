
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Northwestern vs Penn State - Enhanced Play by Play Analysis</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 300;
        }
        .header p {
            margin: 10px 0 0 0;
            font-size: 1.2em;
            opacity: 0.9;
        }
        .content {
            padding: 30px;
        }
        .win-probability-chart {
            margin: 30px 0;
            padding: 20px;
            background: #fafafa;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
        }
        .chart-legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 15px;
            justify-content: center;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }
        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 3px;
        }
        .penalty-analysis {
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #007bff;
        }
        .penalty-summary {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 20px;
        }
        .team-penalties h4 {
            color: #495057;
            margin-bottom: 15px;
            font-size: 1.1em;
        }
        .team-penalties ul {
            list-style: none;
            padding: 0;
        }
        .team-penalties li {
            padding: 10px;
            margin: 8px 0;
            background: white;
            border-radius: 5px;
            border-left: 3px solid #007bff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .wp-impact {
            color: #28a745;
            font-weight: bold;
        }
        .play-by-play-table {
            margin: 30px 0;
            overflow-x: auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        th {
            background: #343a40;
            color: white;
            padding: 15px 10px;
            text-align: left;
            font-weight: 600;
            font-size: 0.9em;
        }
        td {
            padding: 12px 10px;
            border-bottom: 1px solid #e9ecef;
            font-size: 0.9em;
        }
        tr:hover {
            background-color: #f8f9fa;
        }
        .play-number {
            font-weight: bold;
            color: #007bff;
        }
        .win-prob {
            font-weight: bold;
            text-align: center;
        }
        .win-prob.high {
            color: #28a745;
        }
        .win-prob.low {
            color: #dc3545;
        }
        .play-description {
            max-width: 300px;
            word-wrap: break-word;
        }
        @media (max-width: 768px) {
            .penalty-summary {
                grid-template-columns: 1fr;
            }
            .chart-legend {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Northwestern vs Penn State</h1>
            <p>Enhanced Play-by-Play Analysis | 2025-10-11 | Game ID: 401752866</p>
        </div>
        
        <div class="content">
            
    <div class="win-probability-chart">
        <h3>Win Probability Chart</h3>
        <canvas id="winProbabilityChart" width="800" height="400"></canvas>
        <div class="chart-legend">
            <div class="legend-item">
                <span class="legend-color" style="background-color: rgb(75, 192, 192);"></span>
                <span>Penn State Win %</span>
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background-color: rgb(255, 99, 132);"></span>
                <span>Northwestern Win %</span>
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background-color: #ff6b6b;"></span>
                <span>Northwestern Penalties</span>
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background-color: #4ecdc4;"></span>
                <span>Penn State Penalties</span>
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background-color: #ffa500;"></span>
                <span>Major Inflection Points</span>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        const ctx = document.getElementById('winProbabilityChart').getContext('2d');
        
        const winProbabilityChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: ["Play 1", "Play 2", "Play 3", "Play 4", "Play 5", "Play 6", "Play 7", "Play 8", "Play 9", "Play 10", "Play 11", "Play 12", "Play 13", "Play 14", "Play 15", "Play 16", "Play 17", "Play 18", "Play 19", "Play 20", "Play 21", "Play 22", "Play 23", "Play 24", "Play 25", "Play 26", "Play 27", "Play 28", "Play 29", "Play 30", "Play 31", "Play 32", "Play 33", "Play 34", "Play 35", "Play 36", "Play 37", "Play 38", "Play 39", "Play 40", "Play 41", "Play 42", "Play 43", "Play 44", "Play 45", "Play 46", "Play 47", "Play 48", "Play 49", "Play 50", "Play 51", "Play 52", "Play 53", "Play 54", "Play 55", "Play 56", "Play 57", "Play 58", "Play 59", "Play 60", "Play 61", "Play 62", "Play 63", "Play 64", "Play 65", "Play 66", "Play 67", "Play 68", "Play 69", "Play 70", "Play 71", "Play 72", "Play 73", "Play 74", "Play 75", "Play 76", "Play 77", "Play 78", "Play 79", "Play 80", "Play 81", "Play 82", "Play 83", "Play 84", "Play 85", "Play 86", "Play 87", "Play 88", "Play 89", "Play 90", "Play 91", "Play 92", "Play 93", "Play 94", "Play 95", "Play 96", "Play 97", "Play 98", "Play 99", "Play 100", "Play 101", "Play 102", "Play 103", "Play 104", "Play 105", "Play 106", "Play 107", "Play 108", "Play 109", "Play 110", "Play 111", "Play 112", "Play 113", "Play 114", "Play 115", "Play 116", "Play 117", "Play 118", "Play 119", "Play 120", "Play 121", "Play 122", "Play 123", "Play 124", "Play 125", "Play 126", "Play 127", "Play 128", "Play 129", "Play 130", "Play 131", "Play 132", "Play 133", "Play 134", "Play 135", "Play 136", "Play 137", "Play 138", "Play 139", "Play 140", "Play 141", "Play 142", "Play 143", "Play 144", "Play 145", "Play 146", "Play 147"],
                datasets: [{
                    label: 'Penn State Win %',
                    data: [90.16999999999999, 89.58, 90.21000000000001, 89.9, 89.09, 89.25, 89.74, 90.68, 89.53, 91.95, 91.7, 92.66, 92.65, 93.33, 87.36, 88.13, 86.86, 86.47, 85.54, 84.73, 84.02, 85.09, 82.34, 85.19, 82.89, 83.39999999999999, 81.77, 81.24, 81.42, 82.46, 82.1, 81.52000000000001, 79.75999999999999, 82.86, 82.75, 83.77, 84.05, 85.34, 87.42999999999999, 87.35000000000001, 87.42999999999999, 87.2, 86.69, 87.12, 84.34, 85.42999999999999, 85.78, 83.04, 75.21, 76.08, 73.75, 74.31, 72.11999999999999, 79.4, 79.67999999999999, 81.27, 79.95, 80.17999999999999, 83.58, 82.5, 82.12, 75.78, 84.28, 84.17999999999999, 84.54, 82.67999999999999, 80.44, 81.56, 82.6, 79.29, 80.54, 76.42, 78.09, 79.12, 80.46, 78.38000000000001, 77.81, 79.84, 79.02, 78.61, 81.15, 79.36999999999999, 78.88, 76.86, 66.93, 77.58, 78.33, 76.16000000000001, 78.22, 76.2, 79.45, 76.89, 78.11, 76.75, 79.61, 77.46, 76.14, 74.06, 72.96000000000001, 75.1, 76.1, 70.23, 68.58999999999999, 68.32000000000001, 71.34, 68.92, 74.31, 74.81, 47.910000000000004, 47.23, 53.959999999999994, 62.99, 56.76, 52.44, 49.1, 50.129999999999995, 70.6, 78.01, 76.17, 79.23, 79.17999999999999, 82.12, 82.72, 75.36, 71.87, 72.39, 69.67999999999999, 73.29, 66.09, 56.36, 60.72, 44.62, 30.78, 44.68, 35.3, 42.79, 32.54, 16.520000000000003, 18.04, 16.7, 7.180000000000001, 10.59, 1.4500000000000002, 3.4299999999999997, 4.93, 8.0, 0.0],
                    borderColor: 'rgb(75, 192, 192)',
                    backgroundColor: 'rgba(75, 192, 192, 0.1)',
                    tension: 0.1,
                    fill: true,
                    pointRadius: 0,
                    pointHoverRadius: 4
                }, {
                    label: 'Northwestern Win %',
                    data: [9.830000000000005, 10.419999999999996, 9.79, 10.099999999999998, 10.909999999999997, 10.750000000000004, 10.260000000000002, 9.319999999999995, 10.470000000000002, 8.05, 8.299999999999997, 7.340000000000002, 7.350000000000001, 6.669999999999998, 12.639999999999995, 11.870000000000003, 13.139999999999997, 13.529999999999998, 14.459999999999996, 15.269999999999994, 15.980000000000006, 14.91, 17.659999999999997, 14.81, 17.110000000000003, 16.600000000000005, 18.23, 18.759999999999998, 18.58, 17.54, 17.900000000000006, 18.479999999999997, 20.240000000000002, 17.14, 17.25, 16.23, 15.949999999999998, 14.659999999999995, 12.570000000000004, 12.649999999999995, 12.570000000000004, 12.8, 13.309999999999999, 12.880000000000003, 15.659999999999997, 14.570000000000006, 14.219999999999999, 16.959999999999997, 24.79, 23.919999999999998, 26.249999999999996, 25.69, 27.880000000000006, 20.599999999999994, 20.320000000000004, 18.730000000000004, 20.05, 19.820000000000004, 16.42, 17.500000000000004, 17.879999999999995, 24.22, 15.72, 15.82, 15.459999999999996, 17.32, 19.56, 18.44, 17.400000000000006, 20.709999999999994, 19.46, 23.580000000000002, 21.909999999999997, 20.88, 19.540000000000003, 21.619999999999994, 22.189999999999998, 20.16, 20.979999999999997, 21.389999999999997, 18.85, 20.630000000000003, 21.120000000000005, 23.140000000000004, 33.07, 22.419999999999995, 21.67, 23.839999999999996, 21.78, 23.799999999999997, 20.55, 23.109999999999996, 21.889999999999997, 23.250000000000004, 20.389999999999997, 22.540000000000006, 23.860000000000003, 25.939999999999998, 27.04, 24.9, 23.9, 29.769999999999996, 31.410000000000004, 31.679999999999996, 28.659999999999997, 31.08, 25.69, 25.19, 52.08999999999999, 52.77, 46.040000000000006, 37.01, 43.24, 47.56, 50.9, 49.870000000000005, 29.400000000000006, 21.99, 23.829999999999995, 20.77, 20.820000000000004, 17.879999999999995, 17.279999999999994, 24.639999999999993, 28.13, 27.61, 30.320000000000004, 26.71, 33.91, 43.64, 39.28, 55.38000000000001, 69.22, 55.32, 64.7, 57.21000000000001, 67.46, 83.48, 81.96, 83.3, 92.82000000000001, 89.41, 98.55000000000001, 96.57, 95.07, 92.0, 100.0],
                    borderColor: 'rgb(255, 99, 132)',
                    backgroundColor: 'rgba(255, 99, 132, 0.1)',
                    tension: 0.1,
                    fill: true,
                    pointRadius: 0,
                    pointHoverRadius: 4
                }, {
                    label: 'Northwestern Penalty Impact',
                    data: [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null],
                    borderColor: '#ff6b6b',
                    backgroundColor: 'rgba(255, 107, 107, 0.3)',
                    borderWidth: 4,
                    tension: 0.1,
                    fill: false,
                    pointRadius: 6,
                    pointHoverRadius: 8,
                    showLine: true,
                    spanGaps: false
                }, {
                    label: 'Penn State Penalty Impact',
                    data: [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null],
                    borderColor: '#4ecdc4',
                    backgroundColor: 'rgba(78, 205, 196, 0.3)',
                    borderWidth: 4,
                    tension: 0.1,
                    fill: false,
                    pointRadius: 6,
                    pointHoverRadius: 8,
                    showLine: true,
                    spanGaps: false
                }, {
                    label: 'Major Inflection Points',
                    data: [null, null, null, null, null, null, null, null, null, null, null, null, null, null, 87.36, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, 75.21, null, null, null, null, 79.4, null, null, null, null, null, null, null, 75.78, 84.28, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, 66.93, 77.58, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, 70.23, null, null, null, null, 74.31, null, 47.910000000000004, null, 53.959999999999994, 62.99, 56.76, null, null, null, 70.6, 78.01, null, null, null, null, null, 75.36, null, null, null, null, 66.09, 56.36, null, 44.62, 30.78, 44.68, 35.3, 42.79, 32.54, 16.520000000000003, null, null, 7.180000000000001, null, 1.4500000000000002, null, null, null, 0.0],
                    borderColor: '#ffa500',
                    backgroundColor: 'rgba(255, 165, 0, 0.3)',
                    borderWidth: 3,
                    tension: 0.1,
                    fill: false,
                    pointRadius: 8,
                    pointHoverRadius: 12,
                    showLine: true,
                    spanGaps: false,
                    pointStyle: 'triangle'
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    title: {
                        display: true,
                        text: 'Win Probability Throughout the Game'
                    },
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                            afterLabel: function(context) {
                                const datasetLabel = context.dataset.label;
                                const dataIndex = context.dataIndex;
                                
                                if (datasetLabel === 'Northwestern Penalty Impact') {
                                    const delta = [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null][dataIndex];
                                    if (delta !== null && delta !== undefined) {
                                        return `Delta: ${delta > 0 ? '+' : ''}${delta.toFixed(1)}%`;
                                    }
                                } else if (datasetLabel === 'Penn State Penalty Impact') {
                                    const delta = [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null][dataIndex];
                                    if (delta !== null && delta !== undefined) {
                                        return `Delta: ${delta > 0 ? '+' : ''}${delta.toFixed(1)}%`;
                                    }
                                } else if (datasetLabel === 'Major Inflection Points') {
                                    const inflectionPoints = [{"play_number": 15, "change": -5.969999999999999, "home_wp": 87.36, "away_wp": 12.64, "category": "\u2753 Unknown"}, {"play_number": 49, "change": -7.8300000000000125, "home_wp": 75.21, "away_wp": 24.790000000000006, "category": "\u2753 Unknown"}, {"play_number": 54, "change": 7.280000000000015, "home_wp": 79.4, "away_wp": 20.599999999999994, "category": "\u2753 Unknown"}, {"play_number": 62, "change": -6.340000000000003, "home_wp": 75.78, "away_wp": 24.22, "category": "\u2753 Unknown"}, {"play_number": 63, "change": 8.5, "home_wp": 84.28, "away_wp": 15.719999999999999, "category": "\u2753 Unknown"}, {"play_number": 85, "change": -9.929999999999993, "home_wp": 66.93, "away_wp": 33.06999999999999, "category": "\u2753 Unknown"}, {"play_number": 86, "change": 10.649999999999991, "home_wp": 77.58, "away_wp": 22.42, "category": "\u2753 Unknown"}, {"play_number": 102, "change": -5.86999999999999, "home_wp": 70.23, "away_wp": 29.769999999999996, "category": "\u2753 Unknown"}, {"play_number": 107, "change": 5.390000000000001, "home_wp": 74.31, "away_wp": 25.689999999999998, "category": "\u2753 Unknown"}, {"play_number": 109, "change": -26.9, "home_wp": 47.910000000000004, "away_wp": 52.089999999999996, "category": "\u2753 Unknown"}, {"play_number": 111, "change": 6.729999999999997, "home_wp": 53.959999999999994, "away_wp": 46.040000000000006, "category": "\u2753 Unknown"}, {"play_number": 112, "change": 9.030000000000008, "home_wp": 62.99, "away_wp": 37.01, "category": "\u2753 Unknown"}, {"play_number": 113, "change": -6.230000000000004, "home_wp": 56.76, "away_wp": 43.24, "category": "\u2753 Unknown"}, {"play_number": 117, "change": 20.47, "home_wp": 70.6, "away_wp": 29.400000000000006, "category": "\u2753 Unknown"}, {"play_number": 118, "change": 7.410000000000011, "home_wp": 78.01, "away_wp": 21.989999999999995, "category": "\u2753 Unknown"}, {"play_number": 124, "change": -7.359999999999999, "home_wp": 75.36, "away_wp": 24.64, "category": "\u2753 Unknown"}, {"play_number": 129, "change": -7.200000000000003, "home_wp": 66.09, "away_wp": 33.91, "category": "\u2753 Unknown"}, {"play_number": 130, "change": -9.730000000000004, "home_wp": 56.36, "away_wp": 43.64, "category": "\u2753 Unknown"}, {"play_number": 132, "change": -16.1, "home_wp": 44.62, "away_wp": 55.38, "category": "\u2753 Unknown"}, {"play_number": 133, "change": -13.839999999999996, "home_wp": 30.78, "away_wp": 69.22, "category": "\u2753 Unknown"}, {"play_number": 134, "change": 13.899999999999999, "home_wp": 44.68, "away_wp": 55.32, "category": "\u2753 Unknown"}, {"play_number": 135, "change": -9.380000000000003, "home_wp": 35.3, "away_wp": 64.7, "category": "\u2753 Unknown"}, {"play_number": 136, "change": 7.490000000000002, "home_wp": 42.79, "away_wp": 57.21, "category": "\u2753 Unknown"}, {"play_number": 137, "change": -10.25, "home_wp": 32.54, "away_wp": 67.46000000000001, "category": "\u2753 Unknown"}, {"play_number": 138, "change": -16.019999999999996, "home_wp": 16.520000000000003, "away_wp": 83.47999999999999, "category": "\u2753 Unknown"}, {"play_number": 141, "change": -9.52, "home_wp": 7.180000000000001, "away_wp": 92.82, "category": "\u2753 Unknown"}, {"play_number": 143, "change": -9.14, "home_wp": 1.4500000000000002, "away_wp": 98.55, "category": "\u2753 Unknown"}, {"play_number": 147, "change": -8.0, "home_wp": 0.0, "away_wp": 100.0, "category": "\u2753 Unknown"}];
                                    const point = inflectionPoints.find(p => p.play_number - 1 === dataIndex);
                                    if (point) {
                                        return `${point.category} - ${point.change > 0 ? '+' : ''}${point.change.toFixed(1)}%`;
                                    }
                                }
                                return '';
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100,
                        ticks: {
                            callback: function(value) {
                                return value + '%';
                            }
                        }
                    },
                    x: {
                        title: {
                            display: true,
                            text: 'Play Number'
                        }
                    }
                },
                interaction: {
                    intersect: false,
                    mode: 'index'
                }
            }
        });
    </script>

            
            <p>No penalties found in this game.</p>
            
            <div class="play-by-play-table">
                <h3>Complete Play-by-Play with Win Probability</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Play</th>
                            <th>Team</th>
                            <th>Description</th>
                            <th>Penn State WP</th>
                            <th>Northwestern WP</th>
                            <th>Change</th>
                        </tr>
                    </thead>
                    <tbody>

                    </tbody>
                </table>
            </div>
        </div>
    </div>
</body>
</html>
